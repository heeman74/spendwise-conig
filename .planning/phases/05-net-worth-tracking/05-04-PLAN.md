---
phase: 05-net-worth-tracking
plan: 04
type: execute
wave: 4
depends_on: ["05-03"]
files_modified:
  - spendwise/src/components/dashboard/NetWorthSummaryCard.tsx
  - spendwise/src/app/(dashboard)/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard shows net worth summary card with current net worth number and mini sparkline"
    - "Net worth card is clickable and navigates to /net-worth page"
    - "Net worth card shows month-over-month change amount and direction"
    - "Net worth card appears in the dashboard stats grid"
  artifacts:
    - path: "spendwise/src/components/dashboard/NetWorthSummaryCard.tsx"
      provides: "Dashboard widget for net worth summary"
      min_lines: 20
  key_links:
    - from: "spendwise/src/components/dashboard/NetWorthSummaryCard.tsx"
      to: "spendwise/src/hooks/useNetWorth.ts"
      via: "useNetWorth hook for data"
      pattern: "useNetWorth"
    - from: "spendwise/src/app/(dashboard)/dashboard/page.tsx"
      to: "spendwise/src/components/dashboard/NetWorthSummaryCard.tsx"
      via: "Component import and render"
      pattern: "NetWorthSummaryCard"
---

<objective>
Add a net worth summary card to the main dashboard that shows current net worth with a mini sparkline, clickable to navigate to the full /net-worth page.

Purpose: Users see net worth at a glance from the dashboard without navigating away, with a clear path to the full detail view.
Output: Dashboard includes a net worth widget integrated into the existing layout.
</objective>

<execution_context>
@/Users/heechung/.claude/get-shit-done/workflows/execute-plan.md
@/Users/heechung/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-net-worth-tracking/05-CONTEXT.md
@.planning/phases/05-net-worth-tracking/05-03-SUMMARY.md

Key existing files:
@spendwise/src/app/(dashboard)/dashboard/page.tsx
@spendwise/src/components/dashboard/StatsCard.tsx (pattern reference)
@spendwise/src/hooks/useNetWorth.ts (from Plan 03)
@spendwise/src/graphql/queries/netWorth.ts (from Plan 03)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NetWorthSummaryCard and integrate into dashboard</name>
  <files>
    spendwise/src/components/dashboard/NetWorthSummaryCard.tsx
    spendwise/src/app/(dashboard)/dashboard/page.tsx
  </files>
  <action>
    1. Create `spendwise/src/components/dashboard/NetWorthSummaryCard.tsx`:
    - 'use client' directive
    - Self-contained component that fetches its own data using `useNetWorth({ timeRange: 'ONE_MONTH' })`
    - Layout:
      - Card wrapper (use existing Card component pattern)
      - Title: "Net Worth" with a trending icon
      - Current net worth as large formatted number
      - Month-over-month change: "+$X,XXX" or "-$X,XXX" with green/red color and up/down arrow
      - Mini sparkline (Recharts LineChart, height 60px, no axes/grid/tooltip, dot={false}, isAnimationActive={false})
        - Use history data from the netWorth query
        - Sparkline stroke: green if positive trend, red if negative
      - "View Details" link text at bottom
    - Entire card is wrapped in `<Link href="/net-worth">` from next/link (or onClick with router.push)
    - Card has `cursor-pointer` and `hover:shadow-lg` transition for clickability
    - Loading state: show skeleton/spinner in card (do not block whole dashboard)
    - Error state: show card with "--" placeholder (dashboard should not break if net worth API fails)
    - If no data (no accounts): show $0 with "No accounts yet" subtitle

    2. Update `spendwise/src/app/(dashboard)/dashboard/page.tsx`:
    - Import NetWorthSummaryCard
    - Add NetWorthSummaryCard to the dashboard layout
    - Place it prominently — add a new section BEFORE the "Charts and transactions grid" section:
      ```tsx
      {/* Net Worth Summary */}
      <NetWorthSummaryCard />
      ```
    - The card should span full width or be a distinct section between stats grid and charts
    - Do NOT break existing dashboard layout — the net worth card is an addition
    - For demo mode: render the card but let it handle its own demo/empty state (it will show $0 or loading)

    IMPORTANT: The NetWorthSummaryCard must be resilient. If the API call fails or returns an error, it must NOT crash the dashboard. Use error boundaries or internal error handling.
  </action>
  <verify>
    - `cd spendwise && npx tsc --noEmit` compiles without errors
    - `cd spendwise && npm run build` completes without errors
    - Dashboard page imports and renders NetWorthSummaryCard
    - NetWorthSummaryCard component exists with sparkline and click navigation
  </verify>
  <done>
    Dashboard shows net worth summary card with current value, change indicator, and sparkline. Card is clickable to navigate to /net-worth. Dashboard remains stable even if net worth API fails.
  </done>
</task>

</tasks>

<verification>
1. `cd spendwise && npx tsc --noEmit` compiles without errors
2. `cd spendwise && npm run build` succeeds
3. Dashboard renders NetWorthSummaryCard component
4. NetWorthSummaryCard shows net worth number and sparkline
5. Clicking the card navigates to /net-worth
</verification>

<success_criteria>
- Dashboard includes net worth summary card
- Card shows current net worth with sparkline visualization
- Card shows month-over-month change with direction indicator
- Card is clickable and navigates to /net-worth
- Card handles loading and error states gracefully without breaking dashboard
- Existing dashboard layout and functionality preserved
</success_criteria>

<output>
After completion, create `.planning/phases/05-net-worth-tracking/05-04-SUMMARY.md`
</output>
